(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"16dc":function(t,e,a){},"4a17":function(t,e,a){"use strict";var n=a("4bda"),o=a.n(n);o.a},"4bda":function(t,e,a){},ec95:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-pull-to-refresh",{on:{refresh:t.reload}},[a("q-page",{staticClass:"q-pa-lg bg-grey-3 column"},[t.lent_money_to.length>0?a("div",{staticClass:"q-pa-md"},[a("div",{staticClass:"text-h6 q-pb-md"},[t._v("People you paid for")]),a("q-list",{staticClass:"rounded-borders bg-white",attrs:{bordered:"",separator:""}},t._l(t.lent_money_to,(function(e,n){return a("DashboardItem",{key:n,attrs:{"user-arr":e,type:"credit"},on:{addedAmounts:t.displayAmount}})})),1)],1):t._e(),t.owes_money_to.length>0?a("div",{staticClass:"q-pa-md"},[a("div",{staticClass:"text-h6 q-pb-md"},[t._v("People who paid for you")]),a("q-list",{staticClass:"rounded-borders bg-white",attrs:{bordered:"",separator:""}},t._l(t.owes_money_to,(function(e,n){return a("DashboardItem",{key:n,attrs:{"user-arr":e,type:"debit"},on:{addedAmounts:t.displayAmount}})})),1)],1):t._e(),t.owes_money_to.length<=0&&t.lent_money_to.length<=0?a("div",{staticClass:"no-tasks absolute-center"},[a("q-icon",{staticStyle:{"margin-top":"-8vh"},attrs:{name:"hourglass_empty",size:"100px",color:"primary"}}),a("div",{staticClass:"text-h5 text-center absolute-center text-primary",staticStyle:{"margin-top":"8vh"}},[t._v("\n      No Payment Records\n    ")])],1):t._e(),a("DashboardStatusCard",{attrs:{card:t.card,finance_state:t.finance_state},on:{cardClosed:t.handleClose}})],1)],1)},o=[],s=(a("8e6e"),a("8a81"),a("ac6a"),a("cadf"),a("06db"),a("456d"),a("7f7f"),a("c47a")),r=a.n(s),i=a("758b"),c=a("2f62"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-dialog",{on:{hide:t.closeCard},model:{value:t.cardState,callback:function(e){t.cardState=e},expression:"cardState"}},[a("q-card",{staticClass:"my-card",attrs:{flat:"",bordered:""}},[a("q-img",{attrs:{src:t.randomIllustration}}),a("q-card-section",[a("div",{staticClass:"text-overline"},["You"===t.finance_state.debtor_name?a("span",[t._v("\n          Debit Status\n        ")]):a("span",[t._v("\n          Credit Status\n        ")])]),a("div",{staticClass:"text-h5 q-mt-sm q-mb-xs",class:{"text-orange-9":"You"===t.finance_state.debtor_name,"text-green-9":"you"===t.finance_state.creditor_name}},["You"===t.finance_state.debtor_name?a("span",[t.finance_state.amount_owed>0?a("i",[t._v("\n            "+t._s(t.finance_state.debtor_name)+" owe "+t._s(t.finance_state.creditor_name)+" ₹"+t._s(t.finance_state.amount_owed)+"/-\n          ")]):a("i",[t._v("\n            No approved payments.\n          ")])]):a("span",[t.finance_state.amount_owed>0?a("i",[t._v("\n            "+t._s(t.finance_state.debtor_name)+" owes "+t._s(t.finance_state.creditor_name)+" ₹"+t._s(t.finance_state.amount_owed)+"/-\n          ")]):a("i",[t._v("\n            Clear!\n          ")])])]),a("div",{staticClass:"text-caption text-grey-7 q-pt-sm"},["You"===t.finance_state.debtor_name?a("span",[t.finance_state.amount_owed>0?a("i",[t._v("\n            Username: "+t._s(t.finance_state.creditor)),a("br"),t._v("\n            Note this username to pay "+t._s(t.finance_state.creditor_name.split(" ")[0])+" back.\n          ")]):t._e()]):a("span",[t.finance_state.amount_owed>0?a("i",[t._v("\n            Share your username with them so they can make a payment on your behalf.\n          ")]):t._e()]),a("br"),a("br"),"You"===t.finance_state.debtor_name?a("span",[t.finance_state.unapproved_amount_by_debtor>0?a("i",[a("q-icon",{staticClass:"text-orange",staticStyle:{"font-size":"1.5em"},attrs:{name:"warning"}}),t._v("\n            "+t._s(t.finance_state.creditor_name.split(" ")[0])+" paid "),a("strong",[t._v("₹"+t._s(t.finance_state.unapproved_amount_by_debtor))]),t._v(" for you which was not included in these calculations."),a("br"),t._v("\n            Approve these payments in `Approve Payments` to include them.\n          ")],1):t._e()]):a("span",[t.finance_state.unapproved_amount_by_creditor>0?a("i",[a("q-icon",{staticClass:"text-orange",staticStyle:{"font-size":"1.5em"},attrs:{name:"warning"}}),t._v("\n            You paid "),a("strong",[t._v("₹"+t._s(t.finance_state.unapproved_amount_by_debtor))]),t._v(" which was not included in these calculations because\n            "+t._s(t.finance_state.debtor_name.split(" ")[0])+" has not approved the payments you made.\n          ")],1):t._e()])])]),a("q-card-actions",[a("q-space"),a("q-btn",{attrs:{color:"grey",round:"",flat:"",dense:"",icon:t.expanded?"keyboard_arrow_up":"keyboard_arrow_down"},on:{click:function(e){t.expanded=!t.expanded}}})],1),a("q-slide-transition",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.expanded,expression:"expanded"}]},[a("q-separator"),a("q-card-section",{staticClass:"text-subitle2"},[t._v("\n          If the status is clear then there are no approved payments between you and this user for the concerned credit or debit state. For more information on how to use the app, check the help section.\n        ")])],1)])],1)],1)},u=[],l=(a("6b54"),{name:"DashboardStatusCard",props:{card:Boolean,finance_state:Object},computed:{randomIllustration:function(){var t=(Math.floor(5*Math.random())+1).toString();return"statics/undraw_".concat(t,".svg")}},data:function(){return{expanded:!1,cardState:null}},methods:{closeCard:function(){this.$emit("cardClosed",!1)}},watch:{card:function(t){this.cardState=t}}}),p=l,m=(a("4a17"),a("2877")),_=a("eebe"),f=a.n(_),h=a("24e8"),b=a("f09f"),y=a("068f"),v=a("a370"),g=a("0016"),w=a("4b7e"),q=a("2c91"),C=a("9c40"),S=a("e9c1"),x=a("eb85"),O=Object(m["a"])(p,d,u,!1,null,"22726eea",null),$=O.exports;f()(O,"components",{QDialog:h["a"],QCard:b["a"],QImg:y["a"],QCardSection:v["a"],QIcon:g["a"],QCardActions:w["a"],QSpace:q["a"],QBtn:C["a"],QSlideTransition:S["a"],QSeparator:x["a"]});var A=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:function(e){return t.financeState(t.userArr[0],t.userArr[1])}}},[a("q-item-section",{attrs:{avatar:""}},[a("q-avatar",{attrs:{icon:"perm_identity",color:"primary","text-color":"white"}})],1),a("q-item-section",[a("q-item-label",{attrs:{overline:""}},[t._v(t._s(t.userArr[1].toUpperCase()))])],1),a("q-item-section",{staticClass:"desktop-only"},[t._v(t._s(t.userArr[0]))])],1)},D=[],P={name:"DashboardItem",props:{userArr:Array,type:String},data:function(){return{finance_state:{creditor_name:"",debtor_name:""}}},methods:{financeState:function(t,e){"debit"===this.type?this.debitState(t,e):"credit"===this.type&&this.creditState(t,e)},creditState:function(t,e){var a=this;i["a"].post("/".concat(this.$store.getters["user_info/uname"],"/getAmountOwed"),{creditor:this.$store.getters["user_info/uname"],debtor:t}).then((function(t){a.finance_state=t.data.data,a.finance_state.creditor_name="you",a.finance_state.debtor_name=e,a.$q.notify({color:"neutral",position:"bottom",timeout:500,message:"".concat(t.data.message),icon:"info",actions:[{icon:"close",color:"white"}]}),a.$emit("addedAmounts",a.finance_state)})).catch((function(t){console.log(t.response),a.$q.notify({color:"negative",position:"top",message:"[".concat(t.response.status,"] ").concat(t.response.data.error),icon:"report_problem"}),401==t.response.status&&a.$router.push("/")}))},debitState:function(t,e){var a=this;i["a"].post("/".concat(this.$store.getters["user_info/uname"],"/getAmountOwed"),{debtor:this.$store.getters["user_info/uname"],creditor:t}).then((function(t){a.finance_state=t.data.data,a.finance_state.debtor_name="You",a.finance_state.creditor_name=e,a.$q.notify({color:"neutral",position:"bottom",timeout:500,message:"".concat(t.data.message),icon:"info",actions:[{icon:"close",color:"white"}]}),a.$emit("addedAmounts",a.finance_state)})).catch((function(t){console.log(t.response),a.$q.notify({color:"negative",position:"top",message:"[".concat(t.response.status,"] ").concat(t.response.data.error),icon:"report_problem"}),401==t.response.status&&a.$router.push("/")}))}}},Q=P,j=a("66e5"),k=a("4074"),I=a("cb32"),Y=a("0170"),U=a("714f"),E=Object(m["a"])(Q,A,D,!1,null,null,null),N=E.exports;function L(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function z(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?L(Object(a),!0).forEach((function(e){r()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):L(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}f()(E,"components",{QItem:j["a"],QItemSection:k["a"],QAvatar:I["a"],QItemLabel:Y["a"]}),f()(E,"directives",{Ripple:U["a"]});var R={created:function(){this.$route.query.u?(this.setProfileImg(this.$route.query.url),this.loadData(this.$route.query.u)):this.uname?this.loadData(this.uname):(this.$router.push("/"),this.$q.notify({color:"neutral",position:"bottom",message:"Please log in with your registered ID",icon:"report_problem"}))},data:function(){return{finance_state:{creditor_name:"",debtor_name:""},card:!1,expanded:!1}},computed:z({},Object(c["c"])("user_info",["uname","lent_money_to","owes_money_to"])),components:{DashboardStatusCard:$,DashboardItem:N},methods:z({},Object(c["b"])("user_info",["setUserData","setProfileImg","updateLentArr","updateOwesArr"]),{displayAmount:function(t){this.finance_state=t,this.card=!0},handleClose:function(t){this.card=t},loadData:function(t){var e=this;t||(console.log("User not logged in"),this.$q.notify({color:"neutral",position:"top",message:"Please log in to see this page.",icon:"report_problem"}),this.$router.push("/")),i["a"].post("/".concat(t,"/getUser"),{passw_hash:"hello"}).then((function(a){e.setUserData({username:t,name:a.data.data.name}),e.updateLentArr(a.data.data.lent_money_to),e.updateOwesArr(a.data.data.owes_money_to),e.$q.notify({color:"neutral",position:"bottom",timeout:500,message:"".concat(a.data.message),icon:"info",actions:[{icon:"close",color:"white"}]})})).catch((function(t){console.log(t.response),401==t.response.status?(e.$q.notify({color:"neutral",position:"top",message:"Please log in to see this page.",icon:"report_problem"}),e.$router.push("/")):e.$q.notify({color:"negative",position:"top",message:"[".concat(t.response.status,"] ").concat(t.response.data.error),icon:"report_problem"})}))},reload:function(t){this.loadData(this.uname),t()}})},B=R,J=(a("f0db"),a("59d7")),M=a("9989"),T=a("1c1c"),F=Object(m["a"])(B,n,o,!1,null,"46ca7d56",null);e["default"]=F.exports;f()(F,"components",{QPullToRefresh:J["a"],QPage:M["a"],QList:T["a"],QIcon:g["a"]})},f0db:function(t,e,a){"use strict";var n=a("16dc"),o=a.n(n);o.a}}]);