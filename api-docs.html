<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>docs</title>
</head>
<body>
  <script src="https://api.apiary.io/seeds/embed.js"></script>
  <script>
    var embed = new Apiary.Embed({
      apiBlueprint: "FORMAT: 1A\n# SpliDwise\n\nSplidwise is an API that talks to hyperledger fabric to manage shared expenses.\n\n# Group Chain State\n\nResources related to querying the world state.\n\n## World State [/queryAll]\n\n### List All Assets [GET]\n\nList of all the key-value pairs in the world state. Keys are tuples of (creditor, debtor) and values are arrays of user payments.\n\n+ Response 200 (application/json)\n\n{\n    \"(creditor_uid3, debtor_uid1)\": [\n        {\n            \"txid\": 001,\n            \"amount\": 20,\n            \"approved\": false,\n            \"description\": \"Paid for dinner\",\n            \"timestamp\": 1586471276\n        },\n        {\n            \"txid\": 002,\n            \"amount\": 30,\n            \"approved\": true,\n            \"description\": \"THC lunch\",\n            \"timestamp\": 1586554076\n        }\n    ],\n    \"(creditor_uid117, debtor_uid60)\": [\n        {\n            \"txid\": 001,\n            \"...\"\n        },\n    ],\n    \"userid3\": {\n        \"name\": \"Mahavir Jhawar\",\n        \"lent_money_to\": [debtor_uid1, debtor_uid54, debtor_uid7],\n        \"owes_money_to\": [creditor_uid12, creditor_uid30]\n    }\n}\n\n# Group Users\n\nResources related to managing users and user actions.\n\n## Registration [/registerUser]\n\n### Create a New User [POST]\n\nUse this to create a new user for the app. It takes a JSON object with email and personal information in the form another object.\n\n- username (string) - The email ID.\n- info (mixed object) - Collection of personal details.\n\n+ Request (application/json)\n{\n    \"username\": \"user1@protonmail.com\",\n    \"info\": {\n        \"name\": \"Fettered Darwin\"\n    }\n}\n\n+ Response 201 (application/json)\n{\n    \"data\": {\n        \"username\": \"user1@protonmail.com\",\n        \"info\": {\n            \"name\": \"Fettered Darwin\",\n            \"lent_money_to\": [],\n            \"owes_money_to\": []\n        }\n    },\n    \"message\": \"User created successfully.\"\n}\n\n\n# Group Transactions\n\nResources related to making new transactions on the hyperledger to modify asset records in world state."
    });

    if (false) {
        var changed = null;
        var xhrChanged = new XMLHttpRequest();
        var xhrData = new XMLHttpRequest();
        setInterval(function() {
            xhrChanged.open('GET', window.location.href + "/changed", true);
            xhrChanged.send();

            xhrChanged.onreadystatechange = function() {
                if (xhrChanged.readyState === 4 && xhrChanged.status === 200) {
                    if (!changed) {
                        changed = xhrChanged.responseText;
                    }
                    if (changed != xhrChanged.responseText) {
                        changed = xhrChanged.responseText;
                        xhrData.open('GET', window.location.href + "/source", true);
                        xhrData.send();

                        xhrData.onreadystatechange = function() {
                            if (xhrData.readyState === 4 && xhrData.status === 200) {
                                window[embed.adaptee.id].contentWindow.postMessage({"origin": "Apiary.Embed", "eventType": "anonymousPreview", "data": {"code": xhrData.responseText}}, '*');
                            }
                        }
                    }
                }
            }
        }, 1000);
    }
  </script>
</body>
</html>
